# 前端html页面接入小组件方式

## 1. 前端html页面中引入小组件js文件：

```html
<script src="http://www.liuhongtian.com:8080/js/chat-widget.js"></script>
```

## 2. 在页面中 ```</body>``` 前加入如下js脚本，添加小组件：

```javascript
        // 用户名参数，用于标识用户，目前未对用户做限制，请自行获取
        const username = ... ...;

        // 要访问的工作空间（必须是slug，不是显示名称！），目前请固定到lx2，后期会取消此参数。
        const workspace = 'lx2';
            
        // URL中的API服务器地址与端口，目前请固定到此值，正式部署后会调整。
        const apibase = "http://www.liuhongtian.com:8080";

        // 以下是AI助手功能启用标识，目前未使用，后续会实现。
        const enable_chat = true; // 是否启用智慧问答功能，缺省为true
        const enable_report = true; // 是否启用智慧报表功能，缺省为false
        const enable_execute = true; // 是否启用智慧执行功能，缺省为false

        const container_id; //

        // AI助手唤出按钮的缺省样式，可以是任意HTML元素，例如：img, svg, div, input等等。下面的取值是缺省值，如果调用时不设置button_html，那么就使用 这个svg。
        const button_html = `<svg t="1740125757699" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="36" height="36"><path d="M623.786667 627.958519l-94.814815-274.204445a25.220741 25.220741 0 0 0-9.481482-12.98963 39.158519 39.158519 0 0 0-40.58074 0 25.220741 25.220741 0 0 0-9.481482 12.98963l-93.677037 273.066667c-4.266667 12.515556-3.508148 21.238519 2.085926 26.453333a31.194074 31.194074 0 0 0 22.376296 7.774815 30.814815 30.814815 0 0 0 21.522963-6.637037 44.847407 44.847407 0 0 0 11.282963-17.445926l20.100741-52.148148h92.065185l21.712593 54.518518a43.045926 43.045926 0 0 0 10.429629 15.54963 28.444444 28.444444 0 0 0 21.048889 6.162963 32.142222 32.142222 0 0 0 22.376297-8.059259c5.688889-5.214815 6.637037-13.463704 3.034074-25.031111zM464.592593 533.617778l35.176296-112.82963 34.891852 112.82963zM718.696296 632.225185a29.677037 29.677037 0 0 1-7.111111 21.997037 30.340741 30.340741 0 0 1-22.85037 7.300741 28.444444 28.444444 0 0 1-22.471111-7.300741 30.814815 30.814815 0 0 1-6.637037-21.428148V364.373333q0-29.013333 29.013333-29.013333A33.564444 33.564444 0 0 1 711.111111 341.333333a27.117037 27.117037 0 0 1 7.774815 22.186667z" fill="#0097FF" p-id="6126"></path><path d="M555.804444 56.888889a410.074074 410.074074 0 0 0-409.41037 409.41037 35.460741 35.460741 0 0 0 0 4.930371c-28.444444 29.297778-88.746667 96.331852-88.746667 143.454814 0 52.148148 49.303704 72.248889 84.48 73.386667l40.106667 9.007408 7.585185 197.025185a73.765926 73.765926 0 0 0 74.145185 73.007407h150.281482a29.297778 29.297778 0 1 0 0-58.500741H263.964444a14.980741 14.980741 0 0 1-14.885925-14.885926l-9.481482-243.768888-87.04-18.962963-3.034074-0.663704h-3.318519a64.948148 64.948148 0 0 1-19.911111-4.551111c-9.481481-3.792593-9.481481-7.300741-9.481481-10.619259 0-16.971852 37.262222-68.171852 79.549629-109.700741a29.297778 29.297778 0 0 0 7.300741-29.771852 28.444444 28.444444 0 0 0 1.422222-9.007407 350.814815 350.814815 0 0 1 701.62963 0c0 16.308148 29.297778 29.297778 29.297778 29.297777s29.297778-12.98963 29.297778-29.297777A409.979259 409.979259 0 0 0 555.804444 56.888889z" fill="#0097FF" p-id="6127"></path><path d="M860.728889 291.271111s146.299259 247.751111-81.92 485.451852c0 0-11.282963 50.725926 47.407407 36.124444 0 0 163.555556-134.542222 136.912593-392.438518z" fill="#0097FF" p-id="6128"></path></svg>`;

        // 聊天组件
        let chatWidget;
        
        // 初始化聊天组件
        document.addEventListener('DOMContentLoaded', () => {
            // 如果已存在聊天组件，先移除
            if (chatWidget) {
                document.querySelector('.chat-widget-button')?.remove();
                document.querySelector('.chat-window')?.remove();
            }

            // 创建新的聊天组件实例，传入配置对象
            chatWidget = new ChatWidget({
                workspace: workspace,
                username: username,
                apibase: apibase,
                enable_chat: enable_chat,
                enable_report: enable_report,
                enable_execute: enable_execute,
                button_html: button_html
            });
        });
```
